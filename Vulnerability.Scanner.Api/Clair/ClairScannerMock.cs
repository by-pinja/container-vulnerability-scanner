using System;
using System.Linq;
using Hangfire;
using Microsoft.Extensions.Options;
using Vulnerability.Scanner.Api.Data;
using Vulnerability.Scanner.Api.Options;

namespace Vulnerability.Scanner.Clair
{
    public class ClairScannerMock: IClairScanner
    {
        private readonly IBackgroundJobClient _jobClient;
        private readonly ScannerDataContext _dataContext;

        public ClairScannerMock(IBackgroundJobClient jobClient, ScannerDataContext dataContext)
        {
            _jobClient = jobClient;
            _dataContext = dataContext;
        }

        public void CreateReport(Guid reportId)
        {
            var report = _dataContext.Reports.Single(x => x.Id == reportId);
            report.ReportHtml = "<b>dummy mock report</b>";
            report.ReportJson = "{}";
        }
    }
}